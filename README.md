# 概要

クライアントがサーバに接続し、mp4 ファイルをアップロードできるサービスです。
サーバーはバックグラウンドで動作し、クライアントは CLI を通じてサーバーに接続します。
クライアントが CLI でアップロードするファイルを選択してコマンドを実行すると、ファイルのアップロードが開始されます。
アップロードが完了したら、サーバーからクライアントに状態を報告するメッセージが送られます。

#　機能要件

- サーバーは CLI で起動し、バックグラウンドで着信接続を待機する。
- 確実にファイル全体が送信されることを保証するため、クライアントは TCP を使用してサーバーにファイルを送信する。
- サーバーは受け取ったファイルを常に mp4 ファイルとして解釈する。他のファイル形式はサポートしないため、クライアントでファイル形式を確認する。
- サーバはレスポンスプロトコル(ステータス情報を含む 16 バイトのメッセージ)を用いて応答する。

# 非機能要件

- サーバーは最大で 4TB のデータを保存可能。容量制限に達した場合、サービスはそれ以上稼働しない。
- ファイルシステムには、毎秒 20,000 個の 1400 バイトのパケットを処理する能力が求められる。

# 動作確認方法

## 1. サーバーの起動

```bash
# サーバーを起動
python server.py

# 起動成功時のメッセージ
Server started on localhost:8000
```

## 2. クライアントの実行

```bash
# 基本的な使用方法
python client.py /path/to/your/video.mp4

# ダウンロードフォルダのファイルを指定する場合
python client.py ~/Downloads/video.mp4
# または
python client.py /Users/your_username/Downloads/video.mp4

# サーバーのホストとポートを指定する場合
python client.py video.mp4 --host 192.168.1.100 --port 8080
```

## 3. アップロード状況の確認

クライアント実行時に以下のような進捗状況が表示されます：

```
Upload progress: 45.67%  # リアルタイムで更新
Waiting for server response...
File uploaded successfully!  # アップロード成功時
```

## 4. サーバーの終了

サーバーを終了するには、ターミナルで`Ctrl+C`を押します。

```
^C
Shutting down server...
```

## 注意事項

- サーバーが起動していない状態でクライアントを実行すると、接続エラーが発生します
- アップロードできるのは mp4 ファイルのみです
- ファイルサイズは 4GB 以下である必要があります
- ファイル名に空白が含まれる場合は、クォートで囲んで指定してください：
  ```bash
  python client.py "~/Downloads/my video.mp4"
  ```

## ネットワーク接続

異なるデバイス間でファイル転送を行う場合：

1. サーバー側の IP アドレスを確認：

```bash
# Macの場合
ifconfig | grep "inet "
```

2. サーバーを起動（サーバーデバイスの IP アドレスを指定）：

```bash
# 例：サーバーのIPアドレスが192.168.1.100の場合
python server.py --host 192.168.1.100
```

3. クライアントを実行（サーバーの IP アドレスを指定）：

```bash
python client.py video.mp4 --host 192.168.1.100
```

注意：

- `localhost`や`127.0.0.1`は同じデバイス内でのみ接続可能です
- 異なるデバイス間で接続する場合は、ローカル IP アドレスを使用してください
- ファイアウォールの設定で使用するポート（デフォルト：8000）が開いている必要があります
